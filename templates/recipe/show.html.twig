{% extends 'base.html.twig' %}

{% block body %}
   <main class="container recipe-main">
      <div class="row justify-content-between text-md-right pt-3 px-3 ml-md-2 mr-md-1 main-title">
        <h2>{{ recipe.name }}</h2>
        <div class="d-none d-md-block">
            {% for i in 1..5 %}
                {% if recipe.averageRate >= i %}
                <i class="fa fa-star" aria-hidden="true"></i>
                {% else %}
                <i class="fa fa-star-o" aria-hidden="true"></i>
                {% endif %}
            {% endfor %} 
        </div>
      </div>
      <div class="row d-block d-md-none pt-2 px-3">
            {% for i in 1..5 %}
                {% if recipe.averageRate >= i %}
                <i class="fa fa-star" aria-hidden="true"></i>
                {% else %}
                <i class="fa fa-star-o" aria-hidden="true"></i>
                {% endif %}
            {% endfor %} 
      </div>
      <div class="row pt-0 pt-md-3 px-3 ml-md-2 mr-md-1 recipe-time-difficulty">
        <p>Temps : environ {{ recipe.duration }} minutes<br>
        {% if recipe.difficulty == 1 %}
          {% set difficulty = 'débutant' %}
        {% endif %}
        {% if recipe.difficulty == 2 %}
          {% set difficulty = 'intermédiare' %}
        {% endif %}
        {% if recipe.difficulty == 3 %}
          {% set difficulty = 'expert' %} 
        {% endif %}
        Difficulté : {{ difficulty }}</p>
      </div>
      <div class="row flex-lg-nowrap pt-md-3 px-3 ml-md-2 mr-md-1">
        <div class="col-12 col-lg-6 order-lg-2 mb-3 mb-lg-0">
          <img src="{{ asset('assets/images/' ~ recipe.image) }}" class="img-fluid" alt="">
        </div>
        <div class="col-12 col-lg-6 p-0">
          <div class="row">
            <div class="col-12 col-md-6">
              <h5>Ingrédients :</h5>
              <ul class="recipe-list">
              {% for ingredient in recipe.ingredient %}
                <li>{{ ingredient }}</li>
              {% endfor %}
              </ul>
            </div>
            <div class="col-12 col-md-6">
              <h5>Matériel :</h5>
              <ul class="recipe-list">
              {% for equipement in recipe.equipement %}
                <li>{{ equipement }}</li>
              {% endfor %}
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="row pt-3 px-3 ml-md-2 mr-md-1 recipe-content">
        <h5>Recette :</h5>
        <div>{{ recipe.content }}
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-10 recipe-division"></div>
      </div>

      <div class="row pt-3 px-3 ml-md-2 mr-md-1">
        <div class="col-12 col-md-5 text-center">
          <h5>Noter la recette :</h5>
          <div class="col-12 form-rate">
            <div class="row justify-content-center m-3">
            {% for i in 1..5 %}
                {% if recipe.averageRate >= i %}
                <i class="fa fa-star" aria-hidden="true"></i>
                {% else %}
                <i class="fa fa-star-o" aria-hidden="true"></i>
                {% endif %}
            {% endfor %} 
            </div>
            <div class="row justify-content-center m-3">
              <button class="btn rate-btn">Envoyer la note</button>
            </div>
          </div>
        </div>
        <div class="col-12 d-md-none">
          <div class="recipe-division"></div>
        </div>
        <div class="col-12 col-md-7 text-center">
          <h5>Ajouter un commentaire :</h5>
          {# <form class="col-12 form-comment" method="post"> #}
          {{ form_start(commentForm) }}
            <div class="row mt-3">
              <label class="col-12">{{form_label (commentForm.title) }} :</label>
              {{form_widget (commentForm.title) }}
            </div>
            <div class="row mt-3">
              <label class="col-12">{{form_label (commentForm.content) }} :</label>
              {{form_widget (commentForm.content) }}
            </div>
            <div class="row justify-content-center m-3">
              <button class="mt-3 btn comment-btn" type="submit">Envoyer le commentaire</button>
            </div>
          {{ form_end(commentForm) }}
        </div>
      </div>
      <div class="row justify-content-center">
        <div class="col-10 recipe-division"></div>
      </div>
      <div class="row pt-3 px-3 ml-md-2 mr-md-1">
        <h5>Commentaires :</h5>
        {% if recipe.comments is empty %}
        <div class="ml-2">Aucun commentaire n'a été trouvé pour cette recette</div>
        {% else %}
        <div class="comments col-12 overflow-auto">
          {% for comment in recipe.comments %}
            <div class="comment">
              <p>{{ comment.title }}</p>
              <p>par {{ comment.user }} le {{ comment.createdAt|date("d/m/Y") }}</p>
              <p>{{ comment.content }}</p><hr>
            </div>
          {% endfor %}
        {% endif %}
        </div>
      </div>
    </main>
{% endblock %}
